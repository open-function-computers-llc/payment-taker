(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],m=0,p=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"2a45":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("0cdd");var n=a("2b0e"),i=a("5f5b");a("ab8b"),a("2dd8");n["default"].use(i["a"]);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-image":"url('/static/noise.png')"},attrs:{id:"app"}},[a("div",{staticClass:"container"},[a("a",{staticClass:"home-logo",attrs:{href:"/"}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"312.74",height:"168.48",viewBox:"0 0 312.74 168.48"}},[a("g",{attrs:{id:"Group_18","data-name":"Group 18",transform:"translate(-648.26 -347.44)"}},[a("text",{attrs:{id:"open_",transform:"translate(709 425)",fill:"white","font-size":"76","font-family":"Montserrat-ExtraBold, Montserrat","font-weight":"800"}},[a("tspan",{attrs:{x:"0",y:"0"}},[t._v("open_")])]),a("text",{attrs:{id:"function",transform:"translate(701 489)",fill:"white","font-size":"57","font-family":"Montserrat-ExtraBold, Montserrat","font-weight":"800","letter-spacing":"0.002em"}},[a("tspan",{attrs:{x:"0",y:"0"}},[t._v("function")])]),a("path",{attrs:{id:"Path_12","data-name":"Path 12",d:"M41.94-65.88q0,7.38-2.34,11.16a12.965,12.965,0,0,1-7.56,5.4,12.965,12.965,0,0,1,7.56,5.4q2.34,3.78,2.34,11.16V6.66q0,14.04,13.32,14.04h4.5V34.92H51.84q-13.5,0-20.34-6.75T24.66,8.28v-41.4q0-9-8.1-9h-6.3v-14.4h6.3q8.1,0,8.1-9v-41.4q0-13.14,6.84-19.89t20.34-6.75h7.92v14.22h-4.5q-13.32,0-13.32,14.04Z",transform:"translate(638 481)",fill:"white"}})])])]),"gatherInvoices"===t.state?a("InvoiceList",{on:{"ready-to-pay":t.collectPayment}}):t._e(),"readyToPay"===t.state?a("PayForm",{attrs:{secret:this.client_secret,company:this.company,total:this.total,fee:this.fee,invoices:this.invoices,email:this.companyEmail}}):t._e()],1)])},o=[],r=a("bc3a"),c=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"app-card"},[a("div",{staticClass:"card-body"},[a("h1",{staticClass:"mb-3 text-center"},[t._v("Pay Invoice")]),a("div",{staticClass:"invoice-form"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.hideCompanyEmail,expression:"hideCompanyEmail === false"}]},[a("label",[t._v("Company")]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],ref:"company",staticClass:"form-control",attrs:{id:"company",type:"text",autofocus:""},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}})]),a("label",[t._v("Email")]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",staticClass:"form-control",attrs:{id:"email",name:"email",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),a("label",[t._v("Invoice Number")]),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newInvoiceNumber,expression:"newInvoiceNumber"}],ref:"invoiceNumber",staticClass:"form-control",attrs:{id:"invoice",name:"invoice",type:"text"},domProps:{value:t.newInvoiceNumber},on:{input:function(e){e.target.composing||(t.newInvoiceNumber=e.target.value)}}})]),a("label",{attrs:{for:"amount"}},[t._v("Amount Due")]),a("div",{staticClass:"input-group mb-3"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newInvoiceAmount,expression:"newInvoiceAmount"}],ref:"invoiceAmount",staticClass:"form-control",attrs:{id:"amount",type:"text"},domProps:{value:t.newInvoiceAmount},on:{input:function(e){e.target.composing||(t.newInvoiceAmount=e.target.value)}}})]),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn mb-5",on:{click:t.addInvoice}},[t._v(" Add Invoice ")])]),t.invoices.length?a("table",{staticClass:"mb-3"},[t._l(t.invoices,(function(e,n){return a("tr",{key:"invoice"+n},[a("td",[t._v("Invoice # "+t._s(e.number))]),a("td",{staticClass:"text-right"},[t._v("$"+t._s(parseFloat(e.amount).toFixed(2)))])])})),a("tr",{staticStyle:{"border-bottom":"1px solid #ccc"}},[t._m(1),a("td",{staticClass:"text-right"},[t._v("$"+t._s(t.total.fee))])]),a("tr",[a("td",[t._v("Total")]),a("td",{staticClass:"text-right"},[t._v("$"+t._s(t.total.totalCharge))])])],2):t._e(),a("div",{staticClass:"text-center"},[t.invoices.length?a("button",{staticClass:"btn w-100",on:{click:function(e){return t.$emit("ready-to-pay",t.paymentInfo)}}},[t._v(" Pay ")]):t._e()])])])])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("$")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("span",{staticClass:"fee-line"},[t._v("Online Transaction Fee")]),a("span",{staticClass:"tooltip"},[a("sup",[a("i",{staticClass:"fa fa-info-circle"})]),a("span",{staticClass:"tooltiptext"},[t._v(" Please send a check by mail to avoid the online transaction fee. ")])])])}],m=(a("d81d"),a("b680"),a("d3b7"),a("25f0"),{data:function(){return{newInvoiceNumber:"",newInvoiceAmount:0,show:!1,company:"",email:"",fee:"",hideCompanyEmail:!1,invoices:[]}},computed:{total:function(){var t=0,e=0,a={Percent:2.9,Fixed:.3},n=0;return this.invoices.map((function(e){t+=parseFloat(e.amount)})),e=(t+parseFloat(a.Fixed))/(1-parseFloat(a.Percent)/100),n=e-t,{amt:t.toFixed(2),fee:n.toFixed(2),totalCharge:e.toFixed(2)}},paymentInfo:function(){return{amount:this.total,invoices:this.invoices,email:this.email,company:this.company}}},methods:{addInvoice:function(){this.invoices.push({number:this.newInvoiceNumber,amount:this.newInvoiceAmount.toString()}),this.hideCompanyEmail=!0,this.newInvoiceNumber="",this.newInvoiceAmount=0,this.$refs.invoiceNumber.focus()}}}),p=m,d=(a("d862"),a("2877")),v=Object(d["a"])(p,l,u,!1,null,null,null),f=v.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},["payForm"===t.state?a("div",{staticClass:"app-card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"pay-form"},[a("h3",{staticClass:"details-header"},[t._v("$"+t._s(t.total))]),a("div",{staticClass:"mb-2",attrs:{"v-if":t.card,id:"card-element"}}),a("div",{staticClass:"mb-3",attrs:{id:"card-errors",role:"alert"}}),a("button",{staticClass:"btn w-100",attrs:{id:"submit"},on:{click:t.pay}},[t._v("Pay")])])])]):t._e(),"error"===t.state?a("div",{staticClass:"app-card"},[t._m(0)]):t._e(),"thanks"===t.state?a("div",{staticClass:"app-card"},[a("div",{staticClass:"card-body"},[a("h3",{staticClass:"text-center mb-4"},[t._v("OPEN FUNCTION")]),a("p",{staticClass:"text-center"},[t._v(t._s(t.company)+" paid on "+t._s(t.timestamp))]),t._l(t.invoices,(function(e,n){return a("div",{key:"invoice"+n},[a("div",{staticClass:"flex"},[a("span",[t._v("Invoice # "+t._s(e.number))]),a("span",[t._v("$"+t._s(parseFloat(e.amount).toFixed(2)))])])])})),a("hr"),a("div",{staticClass:"flex"},[t._m(1),a("span",[t._v("$"+t._s(t.fee))])]),a("div",{staticClass:"flex mb-4"},[a("span",[t._v("Total")]),a("span",[t._v("$"+t._s(t.total))])]),a("p",{staticClass:"text-center"},[t._v("Thank you for your payment!")])],2)]):t._e()])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body"},[a("h1",{staticClass:"text-center"},[t._v("Yikes!")]),a("h3",{staticClass:"text-center"},[t._v(" There has been an issue processing your request, please try again. ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(" Online Transaction Fee "),a("span",{staticClass:"tooltip"},[a("sup",[a("i",{staticClass:"fa fa-info-circle"})]),a("span",{staticClass:"tooltiptext"},[t._v(" Please send a check by mail to avoid the online transaction fee. ")])])])}],_={data:function(){return{complete:!1,publicKey:window.stripePublicKey,card:null,state:"payForm",spinner:!0,timestamp:""}},props:["secret","company","email","total","invoices","fee"],mounted:function(){var t=window.stripe.elements(),e={base:{fontFamily:'"Montserrat", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px"}},a=t.create("card",{style:e});a.mount("#card-element"),a.on("change",(function(t){var e=document.getElementById("card-errors");t.error?e.textContent=t.error.message:e.textContent=""})),this.card=a},created:function(){setInterval(this.getNow,1e3)},methods:{pay:function(){var t=this;this.spinner="true",window.stripe.confirmCardPayment(this.secret,{payment_method:{card:this.card}}).then((function(e){e.error?(console.log("Error!",e.error),t.state="error"):(t.spinner=!1,console.log("Success!",e,t.email),t.state="thanks",c.a.post("http://localhost:9090/receipt",{email:t.email,total:t.total,fee:t.fee}))}))},getNow:function(){var t=new Date,e=t.getMonth()+1+"-"+t.getDate()+"-"+t.getFullYear();this.timestamp=e}}},b=_,g=(a("e4d2"),Object(d["a"])(b,h,y,!1,null,null,null)),C=g.exports;n["default"].use(i["a"]);var w={name:"App",data:function(){return{state:"gatherInvoices",amount:0,fee:0,company:"",companyEmail:"",invoices:[],client_scret:""}},components:{InvoiceList:f,PayForm:C},methods:{collectPayment:function(t){var e=this;this.total=t.amount.totalCharge,this.fee=t.amount.fee,this.company=t.company,this.companyEmail=t.email,this.invoices=t.invoices,c()({method:"post",url:"http://localhost:9090/intent",data:{company:t.company,email:t.email,invoices:t.invoices,amount:Math.round(100*this.total)}}).then((function(t){e.client_secret=t.data.intentID,e.state="readyToPay"}))}}},x=w,I=(a("034f"),Object(d["a"])(x,s,o,!1,null,null,null)),P=I.exports;n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(P)}}).$mount("#app")},"688a":function(t,e,a){},"85ec":function(t,e,a){},d862:function(t,e,a){"use strict";var n=a("688a"),i=a.n(n);i.a},e4d2:function(t,e,a){"use strict";var n=a("2a45"),i=a.n(n);i.a}});
//# sourceMappingURL=app.db967c6a.js.map