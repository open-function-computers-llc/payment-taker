(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],m=0,p=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"2a45":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("0cdd");var a=n("2b0e"),i=n("5f5b");n("ab8b"),n("2dd8");a["default"].use(i["a"]);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),"gatherInvoices"===t.state?n("InvoiceList",{on:{"ready-to-pay":t.collectPayment}}):t._e(),"readyToPay"===t.state?n("PayForm",{attrs:{secret:this.client_secret,company:this.company,total:this.total,fee:this.fee,invoices:this.invoices}}):t._e()],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("a",{staticClass:"logo-home",attrs:{href:"/"}},[t._v(" {of ")])])}],r=n("bc3a"),c=n.n(r),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"app-card"},[n("div",{staticClass:"card-body"},[n("h1",{staticClass:"mb-3 text-center"},[t._v("Pay Invoice")]),n("div",{staticClass:"invoice-form"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.hideCompanyEmail,expression:"hideCompanyEmail === false"}]},[n("label",[t._v("Company")]),n("div",{staticClass:"input-group mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],ref:"company",staticClass:"form-control",attrs:{id:"company",type:"text",autofocus:""},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}})]),n("label",[t._v("Email")]),n("div",{staticClass:"input-group mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",staticClass:"form-control",attrs:{id:"email",name:"email",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),n("label",[t._v("Invoice Number")]),n("div",{staticClass:"input-group mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newInvoiceNumber,expression:"newInvoiceNumber",modifiers:{number:!0}}],ref:"invoiceNumber",staticClass:"form-control",attrs:{id:"invoice",name:"invoice",type:"number"},domProps:{value:t.newInvoiceNumber},on:{input:function(e){e.target.composing||(t.newInvoiceNumber=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("label",{attrs:{for:"amount"}},[t._v("Amount Due")]),n("div",{staticClass:"input-group mb-3"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.newInvoiceAmount,expression:"newInvoiceAmount",modifiers:{number:!0}}],ref:"invoiceAmount",staticClass:"form-control",attrs:{id:"amount",type:"number"},domProps:{value:t.newInvoiceAmount},on:{input:function(e){e.target.composing||(t.newInvoiceAmount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn mb-5",on:{click:t.addInvoice}},[t._v(" Add Invoice ")])]),t.invoices.length?n("table",{staticClass:"mb-3"},[t._l(t.invoices,(function(e,a){return n("tr",{key:"invoice"+a},[n("td",[t._v("Invoice # "+t._s(e.number))]),n("td",{staticClass:"text-right"},[t._v(" $"+t._s(parseFloat(e.amount).toFixed(2))+" ")])])})),n("tr",{staticStyle:{"border-bottom":"1px solid #ccc"}},[t._m(1),n("td",{staticClass:"text-right"},[t._v("$"+t._s(t.total.fee))])]),n("tr",[n("td",[t._v("Total")]),n("td",{staticClass:"text-right"},[t._v("$"+t._s(t.total.totalCharge))])])],2):t._e(),n("div",{staticClass:"text-center"},[t.invoices.length?n("button",{staticClass:"btn w-100",on:{click:function(e){return t.$emit("ready-to-pay",t.paymentInfo)}}},[t._v(" Pay ")]):t._e()])])])])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text"},[t._v("$")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[n("span",{staticClass:"fee-line"},[t._v("Online Transaction Fee ")]),n("span",{staticClass:"tooltip"},[n("sup",[n("i",{staticClass:"fa fa-info-circle"})]),n("span",{staticClass:"tooltiptext"},[t._v(" Please send a check by mail to avoid the online transaction fee. ")])])])}],m=(n("d81d"),n("b680"),n("d3b7"),n("25f0"),{data:function(){return{newInvoiceNumber:"",newInvoiceAmount:0,show:!1,company:"",email:"",fee:"",hideCompanyEmail:!1,invoices:[]}},computed:{total:function(){var t=0,e=0,n={Percent:2.9,Fixed:.3},a=0;return this.invoices.map((function(e){t+=parseFloat(e.amount)})),e=(t+parseFloat(n.Fixed))/(1-parseFloat(n.Percent)/100),a=e-t,{amt:t.toFixed(2),fee:a.toFixed(2),totalCharge:e.toFixed(2)}},paymentInfo:function(){return{amount:this.total,invoices:this.invoices,email:this.email,company:this.company}}},methods:{addInvoice:function(){this.invoices.push({number:this.newInvoiceNumber.toString(),amount:this.newInvoiceAmount.toString()}),this.hideCompanyEmail=!0,this.newInvoiceNumber="",this.newInvoiceAmount=0,this.$refs.invoiceNumber.focus()}}}),p=m,d=(n("d862"),n("2877")),v=Object(d["a"])(p,l,u,!1,null,null,null),f=v.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},["payForm"===t.state?n("div",{staticClass:"app-card"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"pay-form"},[n("h3",{staticClass:"details-header"},[t._v("$"+t._s(t.total))]),n("div",{staticClass:"mb-2",attrs:{"v-if":t.card,id:"card-element"}}),n("div",{staticClass:"mb-3",attrs:{id:"card-errors",role:"alert"}}),n("button",{staticClass:"btn w-100",attrs:{id:"submit"},on:{click:t.pay}},[t._v("Pay")])])])]):t._e(),"error"===t.state?n("div",{staticClass:"app-card"},[t._m(0)]):t._e(),"thanks"===t.state?n("div",{staticClass:"app-card"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"text-center mb-4"},[t._v("OPEN FUNCTION")]),n("p",{staticClass:"text-center"},[t._v(t._s(t.company)+" paid on "+t._s(t.timestamp))]),t._l(t.invoices,(function(e,a){return n("div",{key:"invoice"+a},[n("div",{staticClass:"flex"},[n("span",[t._v("Invoice # "+t._s(e.number))]),n("span",[t._v("$"+t._s(parseFloat(e.amount).toFixed(2)))])])])})),n("hr"),n("div",{staticClass:"flex"},[n("span",[t._v("Online Transaction Fee")]),n("span",[t._v("$"+t._s(t.fee))])]),n("div",{staticClass:"flex mb-4"},[n("span",[t._v("Total")]),n("span",[t._v("$"+t._s(t.total))])]),n("p",{staticClass:"text-center"},[t._v("Thank you for your payment!")])],2)]):t._e()])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-body"},[n("h1",{staticClass:"text-center"},[t._v("Yikes!")]),n("h3",{staticClass:"text-center"},[t._v(" There has been an issue processing your request, please try again. ")])])}],b={data:function(){return{complete:!1,publicKey:window.stripePublicKey,card:null,state:"payForm",spinner:!0,timestamp:""}},props:["secret","company","email","total","invoices","fee"],mounted:function(){var t=window.stripe.elements(),e={base:{fontFamily:'"Montserrat", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px"}},n=t.create("card",{style:e});n.mount("#card-element"),n.on("change",(function(t){var e=document.getElementById("card-errors");t.error?e.textContent=t.error.message:e.textContent=""})),this.card=n},created:function(){setInterval(this.getNow,1e3)},methods:{pay:function(){var t=this;this.spinner="true",window.stripe.confirmCardPayment(this.secret,{email:this.email,payment_method:{card:this.card}}).then((function(e){e.error?(console.log("Error!",e.error),t.state="error"):(t.spinner=!1,console.log("Success!",e),t.state="thanks")}))},getNow:function(){var t=new Date,e=t.getMonth()+1+"-"+t.getDate()+"-"+t.getFullYear();this.timestamp=e}}},_=b,C=(n("e4d2"),Object(d["a"])(_,h,y,!1,null,null,null)),g=C.exports;a["default"].use(i["a"]);var w={name:"App",data:function(){return{state:"gatherInvoices",amount:0,fee:0,company:"",invoices:[],client_scret:""}},components:{InvoiceList:f,PayForm:g},methods:{collectPayment:function(t){var e=this;this.total=t.amount.totalCharge,this.fee=t.amount.fee,this.company=t.company,this.email=t.email,this.invoices=t.invoices,c()({method:"post",url:"http://localhost:9090/intent",data:{company:t.company,email:t.email,invoices:t.invoices,amount:Math.round(100*this.total)}}).then((function(t){e.client_secret=t.data.intentID,e.state="readyToPay"}))}}},x=w,I=(n("034f"),Object(d["a"])(x,s,o,!1,null,null,null)),P=I.exports;a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(P)}}).$mount("#app")},"688a":function(t,e,n){},"85ec":function(t,e,n){},d862:function(t,e,n){"use strict";var a=n("688a"),i=n.n(a);i.a},e4d2:function(t,e,n){"use strict";var a=n("2a45"),i=n.n(a);i.a}});
//# sourceMappingURL=app.7f13a81c.js.map